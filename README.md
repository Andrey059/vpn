# Домашнее задание
VPN

Описание/Пошаговая инструкция выполнения домашнего задания:
1. Между двумя виртуалками поднять vpn в режимах  
1.1. tun;  
1.2. tap; Прочуствовать разницу.
2. Поднять RAS на базе OpenVPN с клиентскими сертификатами, подключиться с локальной машины на виртуалку. 
3. 3*. Самостоятельно изучить, поднять ocserv и подключиться с хоста к виртуалке Формат сдачи ДЗ - vagrant + ansible

# Решение:
1. Проверить работоспособность можно командой ```iperf3 -c 10.11.12.1 -t 40 -i 5 ```, во вложении скрины выполнения.  
Основное различие между режимами tun и tap заключается в типе используемого адаптера. tap-адаптер обеспечивает полностью виртуальный интерфейс Ethernet (уровень 2), в то время как адаптер tun рассматривается большинством операционных систем как двухточечный (уровень 3).

TAP
Преимущества:

1. Ведёт себя как настоящий сетевой адаптер (за исключением того, что он виртуальный);
2. Может осуществлять транспорт любого сетевого протокола (IPv4, IPv6, IPX и прочих);
3. Работает на 2 уровне, поэтому может передавать Ethernet-кадры внутри тоннеля;
4. Позволяет использовать мосты.   

Недостатки:

1. В туннель попадает broadcast-трафик, что иногда не требуется;
2. Добавляет свои заголовки поверх заголовков Ethernet на все пакеты, которые следуют через тоннель;

TUN
Преимущества:

1. Передает только пакеты протокола IP (3й уровень);  

Недостатки:

1. Broadcast-трафик обычно не передаётся;
2. Нельзя использовать мосты.


# 2. Поднять RAS на базе OpenVPN с клиентскими сертификатами, подключиться с локальной машины на виртуалку. 
Во вложении vagrantfile со скриптом.

1. На хостовой машине нужно установить openvpn ```yum install install openvpn easy-rsa -y```
2. В ```/etc/openvpn``` нужно создать папку client и скопировать сертификаты с сервера:
```
vagrant ssh -c 'cat /opt/ca.crt' > /home/client/ca.crt
vagrant ssh -c 'cat /opt/client.crt' > /home/client/client.crt
vagrant ssh -c 'cat /opt/client.key' > /home/client/client.key
vagrant ssh -c 'cat /opt/dh2048.pem' > /home/client/dh2048.pem
cp c* /etc/openvpn/client/
```

3. После этого подключаемся к серверу ``` sudo openvpn --config ~/client.conf``` и проверяем.  
Скрины с результатом во вложении.
